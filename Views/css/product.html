<!DOCTYPE html>
<html lang="en">

<head>
  <!--

Template 2082 Pure Mix

http://www.tooplate.com/view/2082-pure-mix

-->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="keywords" content="">
  <meta name="description" content="">

  <!-- Site title
   ================================================== -->
  <title>Pure Mix - Single Project</title>

  <!-- Bootstrap CSS
   ================================================== -->
  <link rel="stylesheet" href="css/bootstrap.min.css">

  <!-- Animate CSS
   ================================================== -->
  <link rel="stylesheet" href="css/animate.min.css">

  <!-- Font Icons CSS
   ================================================== -->
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link rel="stylesheet" href="css/ionicons.min.css">

  <!-- Main CSS
   ================================================== -->
  <link rel="stylesheet" href="css/style.css">

  <!-- Google web font 
   ================================================== -->
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,300' rel='stylesheet' type='text/css'>

  <style>
    .btn-area {
      margin-top: 20px;
    }

    .btn-support,
    .btn-buy {
      margin: 5px;
      padding: 10px 25px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
    }

    .btn-support {
      background-color: #28a745;
    }

    .btn-buy {
      background-color: #007bff;
    }

    .project-info h4 {
      margin-top: 15px;
    }

    #product-image {
      max-height: 400px;
      object-fit: cover;
      width: 100%;
      border-radius: 8px;
      margin-top: 20px;
    }
     /* social icon as-is */
    .social-icon {
      padding: 0;
      margin: 0;
    }

    .social-icon li {
      list-style: none;
      display: inline-block;
    }

    .social-icon li a {
      border-radius: 100px;
      border: 1px solid transparent;
      color: #909090;
      font-size: 18px;
      width: 50px;
      height: 50px;
      line-height: 48px;
      text-align: center;
      vertical-align: middle;
      text-decoration: none;
      transition: all 0.4s ease-in-out;
      margin: 0 6px;
    }

    .social-icon li a:hover {
      background: #ffffff;
    }
    
  </style>
</head>

<body>


  <!-- Preloader section
================================================== -->
  <div class="preloader">

    <div class="sk-spinner sk-spinner-pulse"></div>

  </div>


  <!-- Navigation section
================================================== -->
  <div class="nav-container">
    <nav class="nav-inner transparent">

      <div class="navbar">
        <div class="container">
          <div class="row">

            <div class="brand">
              <a href="index.html">Pure Mix</a>
            </div>

            <div class="navicon">
              <div class="menu-container">

                <div class="circle dark inline">
                  <i class="icon ion-navicon"></i>
                </div>

                <div class="list-menu">
                  <i class="icon ion-close-round close-iframe"></i>
                  <div class="intro-inner">
                    <ul id="nav-menu">
                      <li><a href="homepage.html">Home</a></li>
                      <li><a href="profile.html">Profile</a></li>
                      <li><a href="orderhitory.html">My Order</a></li>
                      <li><a href="Notification.html">Notification</a></li>
                      <li><a href="My-Product.html">My Product</a></li>
                    </ul>
                  </div>
                </div>

              </div>
            </div>

          </div>
        </div>
      </div>

    </nav>
  </div>


  <!-- Header section
================================================== -->



  <!-- Single Project section
================================================== -->
  <section id="single-project">
    <div class="container">
      <div class="row">

        <!-- معلومات الحرفي والمنتج -->
        <div class="wow fadeInUp col-md-offset-1 col-md-3 col-sm-offset-1 col-sm-4" data-wow-delay="2.3s">
          <div class="project-info">
            <h4>Artisan</h4>
            <p id="artisanName" data-wow-delay="1.5s">...</p>
          </div>
          <div class="project-info">
            <h4>Artisan Bio</h4>
            <p id="artisanBio" data-wow-delay="1.6s">...</p>
          </div>
          <div class="project-info">
            <h4>Publication date</h4>
            <p id="postDate" data-wow-delay="1.7s">...</p>
          </div>
          <div class="project-info">
            <h4>Category</h4>
            <p id="productCategory" data-wow-delay="1.8s">...</p>
          </div>
          <div class="project-info">
            <h4>Product Type</h4>
            <p id="productType" data-wow-delay="1.9s">...</p>
          </div>
          <div class="project-info">
            <h4>Price</h4>
            <p id="productPrice" data-wow-delay="2.0s">...</p>
          </div>

        </div>

        <!-- تفاصيل وصورة المنتج -->
        <div class="wow fadeInUp col-md-7 col-sm-7" data-wow-delay="2.6s">
          <div class="project-info">
            <h4>Title</h4>
            <p id="productTitle" data-wow-delay="1.5s">...</p>
          </div>
          <p id="productDescription" data-wow-delay="1.6s"></p>
          <p id="supportDescription" style="font-weight: bold; color: #555;" data-wow-delay="1.7s"></p>
          <img id="productImage" src="images/default.jpg" class="img-responsive" alt="Product Image">
          <div class="btn-area" id="button-area"></div>
        </div>

      </div>
    </div>
  </section>




  <!-- Footer section
================================================== -->
  <footer>
    <div class="container">
      <div class="row">

        <div class="col-md-12 col-sm-12 text-center">
          <p class="wow fadeInUp">Created by</p>

          <!-- Aiman -->
          <div class="contributor d-flex justify-content-center align-items-center">
            <p class="contributor-name me-3">Aiman Bani-Hani</p>
            <ul class="social-icon d-flex">
              <li><a href="https://www.linkedin.com/in/aiman-bani-hani-a30542254/" target="_blank"
                  rel="noopener noreferrer" class="fa fa-linkedin-square"></a></li>
              <li><a href="https://github.com/4imn" target="_blank" rel="noopener noreferrer" class="fa fa-github"></a>
              </li>
              <li><a href="https://wa.me/+962782498819" target="_blank" rel="noopener noreferrer"
                  class="fa fa-whatsapp"></a></li>

            </ul>
          </div>
          <!-- Momen -->
          <div class="contributor d-flex justify-content-center align-items-center mt-3">
            <p class="contributor-name me-3">Mo'men Bani-Hani</p>
            <ul class="social-icon d-flex">
              <li><a href="https://www.linkedin.com/in/momenbanihani/" target="_blank" rel="noopener noreferrer"
                  class="fa fa-linkedin-square"></a></li>
              <li><a href="https://github.com/MomenBaniHani" target="_blank" rel="noopener noreferrer"
                  class="fa fa-github"></a></li>
              <li><a href="https://wa.me/+962787105219" target="_blank" rel="noopener noreferrer"
                  class="fa fa-whatsapp"></a></li>
            </ul>
          </div>
        </div>



      </div>
    </div>
  </footer>



  <!-- Javascript 
================================================== -->
  <script src="js/jquery.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/wow.min.js"></script>
  <script src="js/custom.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      const params = new URLSearchParams(window.location.search);
      const productId = params.get("product_id");

      if (!productId) {
        alert("رقم المنتج غير موجود في الرابط");
        return;
      }

      try {
        const response = await fetch(`/api/product/${productId}`);
        const data = await response.json();

        if (typeof data.username === 'string' && data.username.trim() !== '') {
          document.getElementById("artisanName").textContent = data.username;
        } else {
          document.getElementById("artisanName").textContent = "غير معروف";
        }
        document.getElementById("artisanBio").textContent = data.bio || "لا توجد نبذة";
        document.getElementById("postDate").textContent = new Date(data.created_at).toLocaleDateString();
        document.getElementById("productCategory").textContent = data.category;
        document.getElementById("productType").textContent = data.product_type;
        document.getElementById("productPrice").textContent = data.price + " دينار";

        document.getElementById("productTitle").textContent = data.title;
        document.getElementById("productDescription").textContent = data.description;

        if (data.is_for_support && data.support_description) {
          const support = document.getElementById("supportDescription");
          support.style.display = "block";
          support.innerHTML = `
    <strong style="display:block; margin-bottom:5px;">Description :</strong>
    <p style="direction: rtl; text-align: right; margin: 0;">${data.support_description}</p>
  `;
        }


        if (data.product_image) {
          document.getElementById("productImage").src = "/" + data.product_image;
        }

        const btnArea = document.getElementById("button-area");
        btnArea.innerHTML = "";

        if (data.is_for_support) {
          const supportBtn = document.createElement('button');
          supportBtn.className = 'btn-support';
          supportBtn.textContent = "Support";
          supportBtn.onclick = () => {
            window.location.href = `support.html?product_id=${data.product_id}`;
          };
          btnArea.appendChild(supportBtn);
        }

        if (data.is_for_sale) {
          const buyBtn = document.createElement('button');
          buyBtn.className = 'btn-buy';
          buyBtn.textContent = "Buy";
          buyBtn.onclick = () => {
            window.location.href = `buy.html?product_id=${data.product_id}`;
          };
          btnArea.appendChild(buyBtn);
        }


      } catch (error) {
        console.error("❌ فشل في تحميل بيانات المنتج:", error);
      }
    });
  </script>


</body>

</html>